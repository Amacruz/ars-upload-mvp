<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ARS Upload</title>
<style>body{font-family:system-ui;background:#0b1020;color:#eaf0ff;padding:18px} input,select{padding:8px;border-radius:8px;border:1px solid #2b3a6b;background:#111b3a;color:#eaf0ff} button{padding:10px 14px;border-radius:10px;border:1px solid #2b3a6b;background:#141f43;color:#eaf0ff;cursor:pointer}</style>
</head>
<body>
<h1>Upload a workflow export</h1>
<p>Upload JSON from <b>n8n</b>, <b>Make</b>, or <b>Zapier</b>. (No GitHub required.)</p>

<p><label>Org <input id="org" style="width:320px"></label></p>
<p><label>Name <input id="name" style="width:320px" placeholder="e.g., Lead Intake"></label></p>
<p><label>Platform
<select id="platform"><option value="n8n">n8n</option><option value="make">Make</option><option value="zapier">Zapier</option></select>
</label></p>
<p><label>Export JSON <input id="file" type="file" accept=".json,application/json"></label></p>
<p><label>API key (optional) <input id="apikey" style="width:320px" placeholder="X-ARS-Key"></label></p>

<p><button onclick="scan()">Scan</button></p>

<pre id="out" style="margin-top:16px;background:#111b3a;padding:12px;border-radius:10px;white-space:pre-wrap"></pre>

<script>
async function scan(){
  const org=document.getElementById('org').value.trim();
  const name=document.getElementById('name').value.trim()||'workflow';
  const platform=document.getElementById('platform').value;
  const file=document.getElementById('file').files[0];
  const apikey=document.getElementById('apikey').value.trim();
  if(!org||!file){ alert('Org + file required'); return; }
  const fd=new FormData(); fd.append('org',org); fd.append('name',name); fd.append('file',file);
  const headers={}; if(apikey) headers['X-ARS-Key']=apikey;
  const res=await fetch(`/v1/scan/${platform}`,{method:'POST',body:fd,headers});
  const txt=await res.text();
  document.getElementById('out').textContent=txt;
}
</script>
</body></html>
